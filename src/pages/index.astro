---
import { getCollection } from 'astro:content';
import BaseLayout from '../layouts/BaseLayout.astro';
import FormattedDate from '../components/FormattedDate.astro';
import { SITE_TITLE, SITE_DESCRIPTION } from '../consts';

// Fetch all blog posts and sort by date (newest first), then limit to 5 most recent
const posts = (await getCollection('blog'))
	.sort((a, b) => b.data.pubDate.valueOf() - a.data.pubDate.valueOf())
	.slice(0, 5);
---

<BaseLayout title={SITE_TITLE} description={SITE_DESCRIPTION}>
	<!-- Introduction section -->
	<div class="mb-16">
		<!--
			Main page title
			font-sans: System fonts for UI
			text-5xl: Extra large heading (48px)
			font-bold: Bold weight
			text-dark-gray: Primary text color
			mb-8: 32px bottom margin
		-->
		<h1 class="font-sans text-5xl font-bold text-dark-gray mb-8">Hi, I'm [Your Name]</h1>

		<!--
			Introduction paragraphs
			text-dark-gray: Primary text color
			text-lg: Comfortable reading size (18px)
			leading-relaxed: Comfortable line height (1.625)
			space-y-4: 16px spacing between paragraphs
		-->
		<div class="space-y-4 text-dark-gray text-lg leading-relaxed">
			<p>
				I'm a [software developer/designer/engineer] based in [location], focused on [key areas of interest].
				I enjoy exploring [specific technologies or methodologies] and sharing what I learn along the way.
			</p>

			<p>
				This blog is where I write about [main topics: web development, system design, programming languages, etc.].
				You'll find thoughts on [specific areas], tutorials, and reflections on building software that [your philosophy or approach].
			</p>

			<p>
				Feel free to explore the recent posts below, or check out the full archive in the blog section.
			</p>
		</div>
	</div>

	<!-- Recent Posts section heading -->
	<h2 class="font-sans text-3xl font-bold text-dark-gray mb-8">Recent Posts</h2>

	<!--
		Blog post list
		space-y-8: 32px vertical spacing between items
		list-none: Remove default list bullets
		p-0 m-0: Remove default padding and margin
	-->
	<ul class="space-y-8 list-none p-0 m-0">
		{
			posts.map((post) => (
				<li class="border-b border-gray-200 pb-8 last:border-b-0">
					<!--
						Post link wrapper
						block: Full-width clickable area
						group: Enables group-hover for child elements
						no-underline: No text decoration by default
						transition-all: Smooth transitions for all properties
					-->
					<a href={`/blog/${post.id}/`} class="block group no-underline transition-all">
						<!--
							Post title
							Large, bold, sans-serif for visual hierarchy
							group-hover:text-saddle-brown: Changes to brown on parent hover
							transition-colors: Smooth color change
						-->
						<h2 class="font-sans text-2xl font-bold text-dark-gray mb-2 group-hover:text-saddle-brown transition-colors">
							{post.data.title}
						</h2>

						<!--
							Post metadata (publication date)
							text-muted-gray: Secondary color for less emphasis
							text-sm: Smaller text (14px)
							font-sans: System fonts for UI
						-->
						<p class="text-muted-gray text-sm font-sans">
							<FormattedDate date={post.data.pubDate} />
						</p>
					</a>
				</li>
			))
		}
	</ul>
</BaseLayout>
